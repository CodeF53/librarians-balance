#Form the book in "memory" when the matching enchantment is found (oh my god). 
## Sorted from most important to least.

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:mending"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:mending":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:feather_falling"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:feather_falling":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:efficiency"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:efficiency":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:silk_touch"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:silk_touch":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:wind_burst"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:wind_burst":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:swift_sneak"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:swift_sneak":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:soul_speed"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:soul_speed":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:sharpness"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:sharpness":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:protection"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:protection":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:fortune"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:fortune":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:infinity"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:infinity":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:looting"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:looting":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:sweeping_edge"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:sweeping_edge":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:density"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:density":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:breach"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:breach":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:riptide"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:riptide":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:smite"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:smite":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:depth_strider"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:depth_strider":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:respiration"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:respiration":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:aqua_affinity"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:aqua_affinity":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:impaling"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:impaling":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:loyalty"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:loyalty":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:channeling"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:channeling":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:fire_aspect"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:fire_aspect":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:knockback"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:knockback":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:multishot"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:multishot":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:quick_charge"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:quick_charge":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:flame"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:flame":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:power"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:power":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:punch"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:punch":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:thorns"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:thorns":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:projectile_protection"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:projectile_protection":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:fire_protection"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:fire_protection":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:blast_protection"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:blast_protection":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:piercing"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:piercing":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:luck_of_the_sea"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:luck_of_the_sea":$(level)}}}}

$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:lure"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:lure":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:frost_walker"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:frost_walker":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:bane_of_arthropods"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:bane_of_arthropods":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:vanishing_curse"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:vanishing_curse":$(level)}}}}
$execute if items entity @s armor.legs *[minecraft:stored_enchantments~[{enchantment:"minecraft:binding_curse"}]] run data modify entity @s ArmorItems[1] set value {count:1,id:"minecraft:enchanted_book",components:{"minecraft:stored_enchantments":{levels:{"minecraft:binding_curse":$(level)}}}}

#If the book was merged into memory, recognise as a vanilla enchantment.
execute if data entity @s ArmorItems[1].components run scoreboard players set book_vanilla libal.main 1